<ion-content [fullscreen]="true" class="profile-content">
  <div class="profile-container">
    
    <!-- Background Elements -->
    <div class="background-shapes">
      <div class="shape shape-1"></div>
      <div class="shape shape-2"></div>
      <div class="shape shape-3"></div>
    </div>

    <!-- Header Section -->
    <div class="header-section">
      <div class="header-content">
        <div class="back-button">
          <ion-button fill="clear" class="back-btn" (click)="goBack()">
            <ion-icon name="arrow-back-outline" slot="icon-only"></ion-icon>
          </ion-button>
        </div>
        <div class="page-title">
          <h1>My Profile</h1>
          <p>Update your personal information</p>
        </div>
      </div>
    </div>

    <!-- Profile Form -->
    <div class="profile-wrapper">
      
      <!-- Avatar Section -->
      <div class="avatar-section">
        <div class="avatar-container">
          <div class="user-avatar">
            <img [src]="avatarUrl || 'assets/default-avatar-prof.png'" alt="avatar">
          </div>
          <div class="avatar-overlay">
            <ion-icon name="camera-outline"></ion-icon>
            <input type="file" (change)="uploadAvatar($event)" accept="image/*" class="file-input" />
          </div>
        </div>
        <div class="avatar-text">
          <h2>{{ user?.full_name || 'User' }}</h2>
          <p>{{ user?.role === 'professor' ? 'Professor' : 'Student' }}</p>
        </div>
      </div>

      <!-- Form Section -->
      <div class="form-container">
        <form [formGroup]="profileForm" (ngSubmit)="saveProfile()" class="profile-form">
          
          <!-- Full Name Input -->
          <div class="input-group">
            <div class="input-container">
              <ion-icon name="person-outline" class="input-icon"></ion-icon>
              <ion-input 
                formControlName="full_name" 
                type="text" 
                fill="outline" 
                placeholder="Enter your full name"
                class="modern-input">
              </ion-input>
            </div>
            <div class="input-label">Full Name</div>
          </div>

          <!-- Subject Input (for Professors) -->
          <div class="input-group" *ngIf="user?.role === 'professor'">
            <div class="input-container">
              <ion-icon name="book-outline" class="input-icon"></ion-icon>
              <ion-input 
                formControlName="subject" 
                type="text" 
                fill="outline" 
                placeholder="Enter your subject"
                class="modern-input">
              </ion-input>
            </div>
            <div class="input-label">Subject</div>
          </div>

          <!-- Specialty Input (for Students) -->
          <div class="input-group" *ngIf="user?.role === 'student'">
            <div class="input-container">
              <ion-icon name="school-outline" class="input-icon"></ion-icon>
              <ion-input 
                formControlName="specialty" 
                type="text" 
                fill="outline" 
                placeholder="Enter your specialty"
                class="modern-input">
              </ion-input>
            </div>
            <div class="input-label">Specialty</div>
          </div>

          <!-- Save Button -->
          <ion-button 
            expand="block" 
            type="submit" 
            class="save-btn"
            [disabled]="profileForm.invalid">
            <ion-icon name="checkmark-circle-outline" slot="start"></ion-icon>
            <span>Save Profile</span>
          </ion-button>

        </form>
      </div>

    </div>
  </div>
</ion-content>
